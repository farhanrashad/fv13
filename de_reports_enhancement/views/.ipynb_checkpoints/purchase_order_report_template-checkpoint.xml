<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_purchaseorder_document_inherit" inherit_id="purchase.report_purchaseorder_document">
        <xpath expr="/t/t/div" position="before">
            <h2 class="text-center" t-if="o.partner_id">
                <span t-field="o.partner_id.category_id.name"/> Order
            </h2>
        </xpath>
        
        <xpath expr="/t/t/div/h2" position="inside">
            / <span t-field="o.job_order_id.sale_id.global_ref"/>
        </xpath>
        
        <xpath expr="/t/t/div/div[2]" position="after">
            <div class="row">
                <div t-if="o.job_order_id" class="col-3">
                    <span><strong>Customer Reference:</strong><br/></span>
                    <span t-field="o.job_order_id.sale_id.partner_id.ref"/>
                </div>
                <div t-if="o.partner_id" class="col-3">
                    <span><strong>Order Category:</strong><br/></span>
                    <span t-field="o.partner_id.category_id.name"/>
                </div>
                <div class="col-3"/>
                <div class="col-3"/>
            </div>
        </xpath>
  
        
        <xpath expr="/t/t/div/table/thead/tr/th[5]" position="after">
            <t t-if="o.partner_id.is_purchase_weight == True">
                <th><span>Unit Weight</span></th>
                <th><span>Total Weight</span></th>
                <th><span>Weight Price</span></th>
            </t>
        </xpath>
        <xpath expr="/t/t/div/table/tbody/t[2]/tr/t[1]/td[5]" position="after">
            <t t-if="o.partner_id.is_purchase_weight == True">
            <td><span t-field="line.weight"/> Kg</td>
            <td><span t-field="line.total_weight"/> Kg</td>
            <td><span t-field="line.price_weight"/></td>
            </t>
        </xpath>
<!--        
        <xpath expr="/t[1]/t[1]/div[1]/table[1]/thead[1]/tr[1]/th[4]" position="attributes">
            <attribute name="t-if">o.partner_id.is_purchase_weight is not True</attribute>
        </xpath>
        <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[2]/tr[1]/t[1]/td[4]" position="attributes">
           <attribute name="t-if">o.partner_id.is_purchase_weight is not True</attribute>
        </xpath>
 -->       
        <xpath expr="/t[1]/t[1]/div[1]/table[1]/thead[1]/tr[1]/th[5]" position="attributes">
            <attribute name="t-if">o.partner_id.is_purchase_weight is not True</attribute>
        </xpath>
        
        <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[2]/tr[1]/t[1]/td[5]" position="attributes">
            <attribute name="t-if">o.partner_id.is_purchase_weight is not True</attribute>
        </xpath>
        
        <xpath expr="//div[@id='total']//table[1]" position="inside">
            <tr>
                <td colspan="2"><br/></td>
            </tr>
            <t t-if="o.partner_id.is_purchase_weight == False">
            <tr t-if="o.sum_qty">
                <td><b>Total Quantity</b></td>
                <td><span class="m-0" t-field="o.sum_qty"/></td>
            </tr>
            </t>
            <t t-if="o.partner_id.is_purchase_weight == True">
            <tr t-if="o.sum_weight">
                <td><b>Total Weight</b></td>
                <td><span class="m-0" t-field="o.sum_weight"/> Kg</td>
            </tr>
            </t>
        </xpath>
    </template>
</odoo>